<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Code Quest: Levels 13-14 - Data Structures & Algorithms</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1e1e2f 0%, #2d1b69 20%, #4a148c 40%, #6a1b9a 60%, #8e24aa 100%);
      color: #fff;
      margin: 0;
      padding: 0;
      text-align: center;
      min-height: 100vh;
    }
    
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 2s infinite alternate;
    }
    
    @keyframes twinkle {
      0% { opacity: 0.3; }
      100% { opacity: 1; }
    }
    
    .game-container {
      position: relative;
      z-index: 10;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .hud {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(41, 41, 72, 0.9);
      backdrop-filter: blur(10px);
      padding: 15px 25px;
      border-radius: 15px;
      border: 2px solid #e91e63;
      font-weight: bold;
      z-index: 1000;
      box-shadow: 0 8px 32px rgba(233, 30, 99, 0.3);
    }
    
    .progress-bar {
      width: 200px;
      height: 8px;
      background: #333;
      border-radius: 4px;
      margin: 5px 0;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #e91e63, #9c27b0);
      transition: width 0.5s ease;
      border-radius: 4px;
    }
    
    header {
      text-align: center;
      background: rgba(21, 21, 43, 0.8);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 20px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(233, 30, 99, 0.3);
    }
    
    .level-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .level-card {
      background: rgba(41, 41, 72, 0.8);
      backdrop-filter: blur(10px);
      padding: 20px;
      border-radius: 15px;
      border: 2px solid #444;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .level-card:hover {
      border-color: #e91e63;
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(233, 30, 99, 0.3);
    }
    
    .level-card.active {
      border-color: #e91e63;
      background: rgba(233, 30, 99, 0.1);
    }
    
    .level-card.completed {
      border-color: #00ff00;
      background: rgba(0, 255, 0, 0.1);
    }
    
    .section {
      background: rgba(41, 41, 72, 0.8);
      backdrop-filter: blur(10px);
      margin: 20px 0;
      padding: 30px;
      border-radius: 20px;
      border: 2px dashed #e91e63;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    
    .button {
      padding: 12px 24px;
      margin: 8px;
      background: linear-gradient(45deg, #e91e63, #c2185b);
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
    }
    
    .button:hover {
      background: linear-gradient(45deg, #d81b60, #ad1457);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4);
    }
    
    .hidden {
      display: none;
    }
    
    .code-editor {
      background: linear-gradient(135deg, #1e1e1e, #2a2a2a);
      color: #d4d4d4;
      padding: 25px;
      border-radius: 15px;
      font-family: 'Courier New', monospace;
      text-align: left;
      margin: 20px 0;
      border: 2px solid #666;
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
      font-size: 1.1em;
      line-height: 1.6;
    }
    
    .code-output {
      background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
      color: #00ff88;
      padding: 20px;
      border-radius: 15px;
      font-family: 'Courier New', monospace;
      text-align: left;
      margin: 20px 0;
      border: 2px solid #00ff88;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
      font-size: 1.1em;
    }
    
    textarea {
      width: 100%;
      height: 200px;
      background: linear-gradient(135deg, #1e1e1e, #2a2a2a);
      color: #d4d4d4;
      border: 2px solid #666;
      border-radius: 15px;
      padding: 20px;
      font-family: 'Courier New', monospace;
      font-size: 15px;
      resize: vertical;
      box-sizing: border-box;
      transition: all 0.3s ease;
      line-height: 1.5;
    }
    
    textarea:focus {
      outline: none;
      border-color: #e91e63;
      box-shadow: 0 0 20px rgba(233, 30, 99, 0.3);
      background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
    }
    
    .tip-box {
      background: linear-gradient(45deg, #2a2a4a, #3a3a5a, #4a4a6a);
      border-left: 8px solid #ff5722;
      border-radius: 15px;
      padding: 25px;
      margin: 25px 0;
      box-shadow: 0 0 20px rgba(255, 87, 34, 0.2);
    }
    
    .tip-box h3 {
      color: #ff5722;
      margin-top: 0;
      font-size: 1.3em;
    }
    
    .lesson-tabs {
      display: flex;
      justify-content: center;
      margin: 25px 0;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .lesson-tab {
      padding: 12px 25px;
      background: rgba(233, 30, 99, 0.1);
      border: 2px solid #e91e63;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
    }
    
    .lesson-tab.active {
      background: #e91e63;
      color: white;
      box-shadow: 0 0 15px rgba(233, 30, 99, 0.5);
    }
    
    .lesson-tab:hover {
      background: rgba(233, 30, 99, 0.2);
      transform: translateY(-2px);
    }
    
    .navigation {
      display: flex;
      justify-content: space-between;
      margin: 30px auto;
      max-width: 800px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .nav-btn {
      background: linear-gradient(45deg, #444, #666);
      color: #e91e63;
      padding: 12px 24px;
      border: 2px solid #e91e63;
      border-radius: 25px;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
      flex: 1;
      min-width: 150px;
      text-align: center;
    }
    
    .nav-btn:hover {
      background: linear-gradient(45deg, #e91e63, #c2185b);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(233, 30, 99, 0.3);
    }
    
    .data-examples {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin: 25px 0;
    }
    
    .data-card {
      background: linear-gradient(135deg, #1b1b33, #2b2b43);
      padding: 20px;
      border-radius: 15px;
      border: 2px solid #e91e63;
      box-shadow: 0 0 15px rgba(233, 30, 99, 0.2);
      transition: all 0.3s ease;
    }
    
    .data-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(233, 30, 99, 0.3);
    }
    
    .data-card h4 {
      color: #ff5722;
      margin-top: 0;
    }
    
    .sorting-visual {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      height: 200px;
      margin: 20px 0;
      padding: 20px;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      border-radius: 15px;
      border: 2px solid #e91e63;
    }
    
    .bar {
      width: 30px;
      margin: 2px;
      background: linear-gradient(to top, #e91e63, #f06292);
      border-radius: 4px 4px 0 0;
      transition: all 0.5s ease;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      color: white;
      font-weight: bold;
      padding-bottom: 5px;
    }
    
    .bar.comparing {
      background: linear-gradient(to top, #ff9800, #ffb74d);
    }
    
    .bar.sorted {
      background: linear-gradient(to top, #4caf50, #81c784);
    }
    
    @media (max-width: 768px) {
      .game-container {
        padding: 10px;
      }
      
      .level-selector {
        grid-template-columns: 1fr;
      }
      
      .hud {
        position: static;
        margin-bottom: 20px;
      }
    }
  </style>
</head>
<body>

<div class="stars" id="stars"></div>

<div class="hud">
  <div>üåü Total XP: <span id="totalXP">0</span></div>
  <div>üéØ Current Level: <span id="currentLevel">13-14</span></div>
  <div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
  </div>
  <div>üìà Progress: <span id="progressText">0%</span></div>
</div>

<div class="game-container">

<header>
  <h1>üéÆ Code Quest: Levels 13-14</h1>
  <p>Data Structures Deep Dive + Algorithms & Sorting</p>
  
  <div class="level-selector">
    <div class="level-card" onclick="goToLevel('data')" id="dataCard">
      <h3>üîç Level 13: Data Structures</h3>
      <p>Lists, Dictionaries, Sets, Tuples</p>
      <div>Master data organization</div>
    </div>
    <div class="level-card" onclick="goToLevel('algorithms')" id="algorithmsCard">
      <h3>üß™ Level 14: Algorithms & Sorting</h3>
      <p>Bubble Sort, Selection Sort, Performance</p>
      <div>Visual sorting algorithms</div>
    </div>
  </div>
</header>

<!-- Level 13: Data Structures Deep Dive -->
<div id="dataLevel" class="section hidden">
  <h2>üîç Data Structures Deep Dive</h2>
  
  <div class="lesson-tabs">
    <div class="lesson-tab active" onclick="showDataLesson(1)">üìã Lists & Tuples</div>
    <div class="lesson-tab" onclick="showDataLesson(2)">üìö Dictionaries & Sets</div>
    <div class="lesson-tab" onclick="showDataLesson(3)">üèÜ Inventory System</div>
  </div>

  <div id="dataLesson1" class="hidden">
    <h3>üìã Lists and Tuples - Ordered Collections</h3>
    <p>Lists and tuples are fundamental data structures for storing ordered collections. Lists are mutable (changeable), while tuples are immutable (unchangeable).</p>
    
    <div class="data-examples">
      <div class="data-card">
        <h4>üìã Lists - Dynamic Arrays</h4>
        <div class="code-editor">
          # Creating and manipulating lists<br>
          shopping_list = ["apples", "bread", "milk"]<br>
          print("Original list:", shopping_list)<br><br>
          
          # Adding items<br>
          shopping_list.append("eggs")<br>
          shopping_list.insert(1, "bananas")<br>
          print("After adding:", shopping_list)<br><br>
          
          # Removing items<br>
          shopping_list.remove("bread")<br>
          last_item = shopping_list.pop()<br>
          print("After removing:", shopping_list)<br>
          print("Removed item:", last_item)<br><br>
          
          # List operations<br>
          numbers = [3, 1, 4, 1, 5, 9, 2, 6]<br>
          print("Length:", len(numbers))<br>
          print("Max:", max(numbers))<br>
          print("Sorted:", sorted(numbers))
        </div>
      </div>
      
      <div class="data-card">
        <h4>üîí Tuples - Immutable Sequences</h4>
        <div class="code-editor">
          # Creating tuples<br>
          coordinates = (10, 20)<br>
          rgb_color = (255, 128, 0)<br>
          print("Point:", coordinates)<br>
          print("Color RGB:", rgb_color)<br><br>
          
          # Tuple unpacking<br>
          x, y = coordinates<br>
          red, green, blue = rgb_color<br>
          print(f"X: {x}, Y: {y}")<br>
          print(f"R: {red}, G: {green}, B: {blue}")<br><br>
          
          # Multiple assignment<br>
          student_data = ("Alice", 20, "Computer Science")<br>
          name, age, major = student_data<br>
          print(f"Student: {name}, Age: {age}, Major: {major}")<br><br>
          
          # Tuples in lists<br>
          students = [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;("Alice", 85),<br>
          &nbsp;&nbsp;&nbsp;&nbsp;("Bob", 92),<br>
          &nbsp;&nbsp;&nbsp;&nbsp;("Charlie", 78)<br>
          ]<br>
          for name, grade in students:<br>
          &nbsp;&nbsp;&nbsp;&nbsp;print(f"{name}: {grade}%")
        </div>
      </div>
    </div>

    <div class="tip-box">
      <h3>üîë Lists vs Tuples</h3>
      <p>‚Ä¢ **Lists []**: Mutable, use for changing collections (shopping lists, scores)<br>
      ‚Ä¢ **Tuples ()**: Immutable, use for fixed data (coordinates, RGB values)<br>
      ‚Ä¢ **Performance**: Tuples are faster for reading, lists better for modifications<br>
      ‚Ä¢ **Use Cases**: Lists for dynamic data, tuples for structured records</p>
    </div>

    <p><strong>üéØ Practice with Lists and Tuples!</strong></p>
    <textarea id="dataCode1" placeholder="Experiment with lists and tuples...">print("üéÆ Game Score Tracker")
print("=" * 30)

# Player scores (mutable list)
player_scores = [150, 200, 175, 300, 250]
print("Original scores:", player_scores)

# Add new scores
player_scores.append(400)
player_scores.extend([350, 275])
print("After adding scores:", player_scores)

# Calculate statistics
total_score = sum(player_scores)
average_score = total_score / len(player_scores)
high_score = max(player_scores)
low_score = min(player_scores)

print(f"Total Score: {total_score}")
print(f"Average Score: {average_score:.1f}")
print(f"High Score: {high_score}")
print(f"Low Score: {low_score}")

# Game levels (immutable tuples)
level_data = [
    ("Forest", 1, "Easy"),
    ("Mountain", 2, "Medium"),
    ("Dragon's Lair", 3, "Hard"),
    ("Final Boss", 4, "Expert")
]

print("\nüó∫Ô∏è Game Levels:")
for name, level, difficulty in level_data:
    print(f"Level {level}: {name} ({difficulty})")

# Find top 3 scores
top_scores = sorted(player_scores, reverse=True)[:3]
print(f"\nüèÜ Top 3 Scores: {top_scores}")

# Check if player achieved high score
if player_scores[-1] == high_score:
    print("üéâ New high score achieved!")
else:
    print("üí™ Keep playing to beat the high score!")</textarea>
    <br>
    <button class="button" onclick="runDataCode(1)">‚ñ∂Ô∏è Run Code</button>
    
    <div id="dataOutput1" class="code-output hidden"></div>
  </div>

  <div id="dataLesson2" class="hidden">
    <h3>üìö Dictionaries and Sets - Advanced Collections</h3>
    <p>Dictionaries store key-value pairs for fast lookups, while sets store unique elements with mathematical operations.</p>
    
    <div class="data-examples">
      <div class="data-card">
        <h4>üìñ Dictionaries - Key-Value Storage</h4>
        <div class="code-editor">
          # Creating dictionaries<br>
          student = {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;"name": "Alice",<br>
          &nbsp;&nbsp;&nbsp;&nbsp;"age": 20,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;"grades": [85, 92, 78, 96],<br>
          &nbsp;&nbsp;&nbsp;&nbsp;"major": "Computer Science"<br>
          }<br><br>
          
          # Accessing and modifying<br>
          print("Name:", student["name"])<br>
          print("Age:", student.get("age", "Unknown"))<br><br>
          
          # Adding new data<br>
          student["gpa"] = 3.8<br>
          student["courses"] = ["Python", "Math", "Physics"]<br><br>
          
          # Dictionary methods<br>
          print("Keys:", list(student.keys()))<br>
          print("Values:", list(student.values()))<br><br>
          
          # Iterating through dictionary<br>
          for key, value in student.items():<br>
          &nbsp;&nbsp;&nbsp;&nbsp;print(f"{key}: {value}")
        </div>
      </div>
      
      <div class="data-card">
        <h4>üî¢ Sets - Unique Collections</h4>
        <div class="code-editor">
          # Creating sets<br>
          fruits = {"apple", "banana", "orange", "apple"}<br>
          print("Fruits set:", fruits)  # Duplicates removed<br><br>
          
          # Set operations<br>
          vegetables = {"carrot", "broccoli", "spinach"}<br>
          all_food = fruits.union(vegetables)<br>
          print("All food:", all_food)<br><br>
          
          # Mathematical operations<br>
          set1 = {1, 2, 3, 4, 5}<br>
          set2 = {4, 5, 6, 7, 8}<br><br>
          
          print("Union:", set1 | set2)<br>
          print("Intersection:", set1 & set2)<br>
          print("Difference:", set1 - set2)<br>
          print("Symmetric difference:", set1 ^ set2)<br><br>
          
          # Membership testing<br>
          print("Is 3 in set1?", 3 in set1)<br>
          print("Is 10 in set2?", 10 in set2)
        </div>
      </div>
    </div>

    <div class="tip-box">
      <h3>üéØ When to Use Each Structure</h3>
      <p>‚Ä¢ **Dictionaries {}**: Fast lookups by key (databases, caches, mappings)<br>
      ‚Ä¢ **Sets {}**: Unique elements, mathematical operations (tags, categories)<br>
      ‚Ä¢ **Lists []**: Ordered sequences, allow duplicates (queues, histories)<br>
      ‚Ä¢ **Tuples ()**: Immutable records, structured data (coordinates, configs)</p>
    </div>

    <p><strong>üéØ Build a Student Database!</strong></p>
    <textarea id="dataCode2" placeholder="Create your student management system...">print("üéì Advanced Student Management System")
print("=" * 45)

# Student database using dictionaries
students_db = {
    "S001": {
        "name": "Alice Johnson",
        "age": 20,
        "major": "Computer Science",
        "grades": {"Math": 92, "Physics": 88, "Programming": 95},
        "clubs": {"Coding Club", "Math Society"}
    },
    "S002": {
        "name": "Bob Smith",
        "age": 19,
        "major": "Engineering",
        "grades": {"Math": 85, "Physics": 91, "Chemistry": 87},
        "clubs": {"Engineering Society", "Robotics Club"}
    },
    "S003": {
        "name": "Charlie Brown",
        "age": 21,
        "major": "Computer Science",
        "grades": {"Math": 78, "Programming": 92, "Database": 89},
        "clubs": {"Coding Club", "Game Dev"}
    }
}

# Analyze student data
print("üìä STUDENT ANALYSIS")
print("-" * 25)

all_majors = set()
all_clubs = set()
cs_students = []

for student_id, data in students_db.items():
    # Collect majors and clubs
    all_majors.add(data["major"])
    all_clubs.update(data["clubs"])
    
    # Find CS students
    if data["major"] == "Computer Science":
        cs_students.append(data["name"])
    
    # Calculate GPA
    grades = data["grades"]
    gpa = sum(grades.values()) / len(grades)
    
    print(f"Student ID: {student_id}")
    print(f"Name: {data['name']}")
    print(f"Major: {data['major']}")
    print(f"GPA: {gpa:.2f}")
    print(f"Clubs: {', '.join(data['clubs'])}")
    print("-" * 25)

print(f"üìö All Majors: {', '.join(all_majors)}")
print(f"üèõÔ∏è All Clubs: {', '.join(sorted(all_clubs))}")
print(f"üíª CS Students: {', '.join(cs_students)}")

# Find common clubs between students
coding_club_members = []
for student_id, data in students_db.items():
    if "Coding Club" in data["clubs"]:
        coding_club_members.append(data["name"])

print(f"üë• Coding Club Members: {', '.join(coding_club_members)}")

# Grade analysis
all_subjects = set()
for data in students_db.values():
    all_subjects.update(data["grades"].keys())

print(f"\nüìñ All Subjects: {', '.join(sorted(all_subjects))}")

# Subject averages
subject_averages = {}
for subject in all_subjects:
    grades = []
    for data in students_db.values():
        if subject in data["grades"]:
            grades.append(data["grades"][subject])
    
    if grades:
        subject_averages[subject] = sum(grades) / len(grades)

print("\nüìä Subject Averages:")
for subject, avg in sorted(subject_averages.items()):
    print(f"  {subject}: {avg:.1f}")

print("\nüéâ Database analysis complete!")</textarea>
    <br>
    <button class="button" onclick="runDataCode(2)">‚ñ∂Ô∏è Run Code</button>
    
    <div id="dataOutput2" class="code-output hidden"></div>
  </div>

  <div id="dataLesson3" class="hidden">
    <h3>üèÜ Challenge: RPG Inventory System</h3>
    <p><strong>Mission:</strong> Build a complete RPG inventory management system!</p>
    
    <div class="tip-box">
      <h3>üéØ Challenge Requirements</h3>
      <p>Create a comprehensive inventory system that includes:</p>
      <ul style="text-align: left;">
        <li>Player inventory with items and quantities</li>
        <li>Item categories and rarity systems</li>
        <li>Equipment slots and character stats</li>
        <li>Shop system with buying/selling</li>
        <li>Inventory management operations</li>
      </ul>
    </div>

    <textarea id="dataCode3" placeholder="Build your RPG Inventory System here...">class RPGInventorySystem:
    def __init__(self):
        # Item database with categories and stats
        self.item_database = {
            "health_potion": {
                "name": "Health Potion",
                "category": "consumable",
                "rarity": "common",
                "effect": {"health": 50},
                "value": 25,
                "description": "Restores 50 HP"
            },
            "iron_sword": {
                "name": "Iron Sword",
                "category": "weapon",
                "rarity": "common",
                "stats": {"attack": 15, "durability": 100},
                "value": 100,
                "description": "A sturdy iron blade"
            },
            "leather_armor": {
                "name": "Leather Armor",
                "category": "armor",
                "rarity": "common",
                "stats": {"defense": 8, "durability": 80},
                "value": 75,
                "description": "Basic leather protection"
            },
            "magic_ring": {
                "name": "Ring of Power",
                "category": "accessory",
                "rarity": "rare",
                "stats": {"magic": 20, "mana": 30},
                "value": 500,
                "description": "Increases magical abilities"
            },
            "dragon_scale": {
                "name": "Dragon Scale",
                "category": "material",
                "rarity": "legendary",
                "value": 1000,
                "description": "Rare crafting material"
            }
        }
        
        # Player inventory
        self.inventory = {
            "health_potion": 5,
            "iron_sword": 1,
            "leather_armor": 1,
            "magic_ring": 1
        }
        
        # Equipment slots
        self.equipped = {
            "weapon": "iron_sword",
            "armor": "leather_armor",
            "accessory": "magic_ring"
        }
        
        # Player stats
        self.player_stats = {
            "health": 100,
            "mana": 50,
            "attack": 10,
            "defense": 5,
            "magic": 10
        }
        
        self.gold = 250
    
    def get_item_info(self, item_id):
        return self.item_database.get(item_id, {})
    
    def add_item(self, item_id, quantity=1):
        if item_id in self.item_database:
            if item_id in self.inventory:
                self.inventory[item_id] += quantity
            else:
                self.inventory[item_id] = quantity
            return True
        return False
    
    def remove_item(self, item_id, quantity=1):
        if item_id in self.inventory:
            if self.inventory[item_id] >= quantity:
                self.inventory[item_id] -= quantity
                if self.inventory[item_id] == 0:
                    del self.inventory[item_id]
                return True
        return False
    
    def calculate_total_stats(self):
        total_stats = self.player_stats.copy()
        
        # Add equipment bonuses
        for slot, item_id in self.equipped.items():
            if item_id and item_id in self.item_database:
                item_stats = self.item_database[item_id].get("stats", {})
                for stat, value in item_stats.items():
                    if stat in total_stats:
                        total_stats[stat] += value
        
        return total_stats
    
    def get_inventory_value(self):
        total_value = 0
        for item_id, quantity in self.inventory.items():
            item_value = self.item_database[item_id].get("value", 0)
            total_value += item_value * quantity
        return total_value
    
    def categorize_inventory(self):
        categories = {}
        for item_id, quantity in self.inventory.items():
            item_info = self.item_database[item_id]
            category = item_info.get("category", "misc")
            
            if category not in categories:
                categories[category] = []
            
            categories[category].append({
                "id": item_id,
                "name": item_info["name"],
                "quantity": quantity,
                "rarity": item_info.get("rarity", "common")
            })
        
        return categories
    
    def display_inventory(self):
        print("üéí INVENTORY SYSTEM")
        print("=" * 50)
        print(f"üí∞ Gold: {self.gold}")
        print(f"üíé Total Inventory Value: {self.get_inventory_value()}")
        print()
        
        # Display by category
        categories = self.categorize_inventory()
        
        for category, items in categories.items():
            print(f"üì¶ {category.upper()}")
            print("-" * 20)
            
            for item in items:
                rarity_emoji = {
                    "common": "‚ö™",
                    "rare": "üîµ", 
                    "legendary": "üü°"
                }.get(item["rarity"], "‚ö™")
                
                print(f"  {rarity_emoji} {item['name']} x{item['quantity']}")
            print()
        
        # Display equipped items
        print("‚öîÔ∏è EQUIPPED ITEMS")
        print("-" * 20)
        for slot, item_id in self.equipped.items():
            if item_id and item_id in self.item_database:
                item_name = self.item_database[item_id]["name"]
                print(f"  {slot.title()}: {item_name}")
            else:
                print(f"  {slot.title()}: None")
        print()
        
        # Display total stats
        total_stats = self.calculate_total_stats()
        print("üìä CHARACTER STATS")
        print("-" * 20)
        for stat, value in total_stats.items():
            base_value = self.player_stats[stat]
            bonus = value - base_value
            bonus_text = f" (+{bonus})" if bonus > 0 else ""
            print(f"  {stat.title()}: {value}{bonus_text}")
        print()
        
        # Rarity distribution
        rarity_count = {"common": 0, "rare": 0, "legendary": 0}
        for item_id in self.inventory:
            rarity = self.item_database[item_id].get("rarity", "common")
            rarity_count[rarity] += 1
        
        print("‚ú® RARITY DISTRIBUTION")
        print("-" * 25)
        for rarity, count in rarity_count.items():
            if count > 0:
                print(f"  {rarity.title()}: {count} items")

# Create and demonstrate the inventory system
print("üéÆ RPG Inventory System Demo")
print("=" * 40)

inventory_system = RPGInventorySystem()

# Add some items
print("üì¶ Adding items to inventory...")
inventory_system.add_item("health_potion", 3)
inventory_system.add_item("dragon_scale", 1)
inventory_system.gold += 150

print("‚úÖ Items added successfully!")
print()

# Display full inventory
inventory_system.display_inventory()

print("üéâ RPG Inventory System Complete!")
print("\nThis system demonstrates:")
print("‚Ä¢ Complex data structure management")
print("‚Ä¢ Dictionary-based item database")
print("‚Ä¢ Category organization and filtering")
print("‚Ä¢ Statistical calculations and analysis")
print("‚Ä¢ Real-world game development concepts")</textarea>
    <br>
    <button class="button" onclick="runDataCode(3)">üöÄ Run Inventory System</button>
    
    <div id="dataOutput3" class="code-output hidden"></div>
  </div>
</div>

<!-- Level 14: Algorithms & Sorting -->
<div id="algorithmsLevel" class="section hidden">
  <h2>üß™ Algorithms and Sorting</h2>
  
  <div class="lesson-tabs">
    <div class="lesson-tab active" onclick="showAlgorithmLesson(1)">üîÑ Bubble Sort</div>
    <div class="lesson-tab" onclick="showAlgorithmLesson(2)">üéØ Selection Sort</div>
    <div class="lesson-tab" onclick="showAlgorithmLesson(3)">üèÜ Leaderboard System</div>
  </div>

  <div id="algorithmLesson1" class="hidden">
    <h3>üîÑ Bubble Sort - Step by Step Comparison</h3>
    <p>Bubble Sort is one of the simplest sorting algorithms. It repeatedly compares adjacent elements and swaps them if they're in the wrong order, "bubbling" the largest elements to the end.</p>
    
    <div class="data-examples">
      <div class="data-card">
        <h4>ü´ß How Bubble Sort Works</h4>
        <div class="code-editor">
          def bubble_sort(arr):<br>
          &nbsp;&nbsp;&nbsp;&nbsp;"""Sort array using bubble sort algorithm"""<br>
          &nbsp;&nbsp;&nbsp;&nbsp;n = len(arr)<br>
          &nbsp;&nbsp;&nbsp;&nbsp;comparisons = 0<br>
          &nbsp;&nbsp;&nbsp;&nbsp;swaps = 0<br><br>
          
          &nbsp;&nbsp;&nbsp;&nbsp;# Traverse through all array elements<br>
          &nbsp;&nbsp;&nbsp;&nbsp;for i in range(n):<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Last i elements are already sorted<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for j in range(0, n - i - 1):<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comparisons += 1<br><br>
          
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Swap if elements are in wrong order<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if arr[j] > arr[j + 1]:<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arr[j], arr[j + 1] = arr[j + 1], arr[j]<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;swaps += 1<br><br>
          
          &nbsp;&nbsp;&nbsp;&nbsp;return arr, comparisons, swaps<br><br>
          
          # Example usage<br>
          numbers = [64, 34, 25, 12, 22, 11, 90]<br>
          print("Original:", numbers)<br><br>
          
          sorted_arr, comps, swaps = bubble_sort(numbers.copy())<br>
          print("Sorted:", sorted_arr)<br>
          print(f"Comparisons: {comps}, Swaps: {swaps}")
        </div>
      </div>
      
      <div class="data-card">
        <h4>üìä Visual Bubble Sort</h4>
        <div class="sorting-visual" id="bubbleSortVisual">
          <div class="bar" style="height: 64px;">64</div>
          <div class="bar" style="height: 34px;">34</div>
          <div class="bar" style="height: 25px;">25</div>
          <div class="bar" style="height: 12px;">12</div>
          <div class="bar" style="height: 22px;">22</div>
          <div class="bar" style="height: 11px;">11</div>
          <div class="bar" style="height: 90px;">90</div>
        </div>
        <button class="button" onclick="animateBubbleSort()">üé¨ Animate Bubble Sort</button>
        <button class="button" onclick="resetBubbleSort()">üîÑ Reset</button>
      </div>
    </div>

    <div class="tip-box">
      <h3>‚è±Ô∏è Bubble Sort Analysis</h3>
      <p>‚Ä¢ **Time Complexity**: O(n¬≤) - quadratic time<br>
      ‚Ä¢ **Space Complexity**: O(1) - constant space<br>
      ‚Ä¢ **Best Case**: O(n) when array is already sorted<br>
      ‚Ä¢ **Worst Case**: O(n¬≤) when array is reverse sorted<br>
      ‚Ä¢ **Stable**: Yes, maintains relative order of equal elements</p>
    </div>

    <p><strong>üéØ Implement Your Own Bubble Sort!</strong></p>
    <textarea id="algorithmCode1" placeholder="Write your bubble sort implementation...">def enhanced_bubble_sort(arr, show_steps=False):
    """
    Enhanced bubble sort with step-by-step visualization
    """
    n = len(arr)
    comparisons = 0
    swaps = 0
    steps = []
    
    if show_steps:
        print(f"üîÑ Sorting array: {arr}")
        print("=" * 40)
    
    # Traverse through all array elements
    for i in range(n):
        swapped = False  # Optimization: track if any swaps occurred
        
        if show_steps:
            print(f"\nüìç Pass {i + 1}:")
        
        # Last i elements are already in place
        for j in range(0, n - i - 1):
            comparisons += 1
            
            if show_steps:
                print(f"  Comparing {arr[j]} and {arr[j + 1]}", end="")
            
            # Traverse the array from 0 to n-i-1
            # Swap if the element found is greater than the next element
            if arr[j] > arr[j + 1]:
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
                swaps += 1
                swapped = True
                
                if show_steps:
                    print(f" ‚Üí Swap! Array: {arr}")
            else:
                if show_steps:
                    print(" ‚Üí No swap needed")
        
        # If no swapping occurred, array is sorted
        if not swapped:
            if show_steps:
                print(f"‚úÖ Array sorted early at pass {i + 1}!")
            break
        
        steps.append(arr.copy())
    
    return arr, comparisons, swaps, steps

# Test with different datasets
print("üß™ Bubble Sort Performance Analysis")
print("=" * 45)

# Test Case 1: Random numbers
import random
random_data = [random.randint(1, 100) for _ in range(10)]
print("üìä Test Case 1: Random Numbers")
result1, comps1, swaps1, steps1 = enhanced_bubble_sort(random_data.copy(), True)
print(f"Final result: {result1}")
print(f"Performance: {comps1} comparisons, {swaps1} swaps")

print("\n" + "="*45)

# Test Case 2: Already sorted (best case)
sorted_data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
print("üìä Test Case 2: Already Sorted (Best Case)")
result2, comps2, swaps2, steps2 = enhanced_bubble_sort(sorted_data.copy())
print(f"Original: {sorted_data}")
print(f"Result: {result2}")
print(f"Performance: {comps2} comparisons, {swaps2} swaps")

# Test Case 3: Reverse sorted (worst case)
reverse_data = [10, 9, 8, 7, 6, 5, 4, 3, 2, 1]
print("\nüìä Test Case 3: Reverse Sorted (Worst Case)")
result3, comps3, swaps3, steps3 = enhanced_bubble_sort(reverse_data.copy())
print(f"Original: {reverse_data}")
print(f"Result: {result3}")
print(f"Performance: {comps3} comparisons, {swaps3} swaps")

# Performance comparison
print("\nüìà PERFORMANCE COMPARISON")
print("-" * 30)
print(f"Random Data:    {comps1:3d} comparisons, {swaps1:3d} swaps")
print(f"Sorted Data:    {comps2:3d} comparisons, {swaps2:3d} swaps")
print(f"Reverse Data:   {comps3:3d} comparisons, {swaps3:3d} swaps")

print("\nüéâ Bubble Sort Analysis Complete!")
print("Notice how performance varies dramatically based on input data!")</textarea>
    <br>
    <button class="button" onclick="runAlgorithmCode(1)">‚ñ∂Ô∏è Run Code</button>
    
    <div id="algorithmOutput1" class="code-output hidden"></div>
  </div>

  <div id="algorithmLesson2" class="hidden">
    <h3>üéØ Selection Sort - Finding the Minimum</h3>
    <p>Selection Sort works by repeatedly finding the minimum element from the unsorted portion and placing it at the beginning. It's more efficient than bubble sort in terms of swaps.</p>
    
    <div class="data-examples">
      <div class="data-card">
        <h4>üîç How Selection Sort Works</h4>
        <div class="code-editor">
          def selection_sort(arr):<br>
          &nbsp;&nbsp;&nbsp;&nbsp;"""Sort array using selection sort algorithm"""<br>
          &nbsp;&nbsp;&nbsp;&nbsp;n = len(arr)<br>
          &nbsp;&nbsp;&nbsp;&nbsp;comparisons = 0<br>
          &nbsp;&nbsp;&nbsp;&nbsp;swaps = 0<br><br>
          
          &nbsp;&nbsp;&nbsp;&nbsp;# Traverse through all array elements<br>
          &nbsp;&nbsp;&nbsp;&nbsp;for i in range(n):<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Find minimum element in remaining array<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min_idx = i<br><br>
          
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for j in range(i + 1, n):<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comparisons += 1<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if arr[j] < arr[min_idx]:<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min_idx = j<br><br>
          
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Swap the found minimum with first element<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if min_idx != i:<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arr[i], arr[min_idx] = arr[min_idx], arr[i]<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;swaps += 1<br><br>
          
          &nbsp;&nbsp;&nbsp;&nbsp;return arr, comparisons, swaps<br><br>
          
          # Example usage<br>
          numbers = [64, 25, 12, 22, 11]<br>
          print("Original:", numbers)<br><br>
          
          sorted_arr, comps, swaps = selection_sort(numbers.copy())<br>
          print("Sorted:", sorted_arr)<br>
          print(f"Comparisons: {comps}, Swaps: {swaps}")
        </div>
      </div>
      
      <div class="data-card">
        <h4>üìä Visual Selection Sort</h4>
        <div class="sorting-visual" id="selectionSortVisual">
          <div class="bar" style="height: 64px;">64</div>
          <div class="bar" style="height: 25px;">25</div>
          <div class="bar" style="height: 12px;">12</div>
          <div class="bar" style="height: 22px;">22</div>
          <div class="bar" style="height: 11px;">11</div>
        </div>
        <button class="button" onclick="animateSelectionSort()">üé¨ Animate Selection Sort</button>
        <button class="button" onclick="resetSelectionSort()">üîÑ Reset</button>
      </div>
    </div>

    <div class="tip-box">
      <h3>‚ö° Selection vs Bubble Sort</h3>
      <p>‚Ä¢ **Selection Sort**: Always O(n¬≤) comparisons, but only O(n) swaps<br>
      ‚Ä¢ **Bubble Sort**: O(n¬≤) comparisons and swaps in worst case<br>
      ‚Ä¢ **Memory**: Both use O(1) additional space<br>
      ‚Ä¢ **Stability**: Bubble sort is stable, selection sort is not<br>
      ‚Ä¢ **Performance**: Selection sort generally performs better due to fewer swaps</p>
    </div>

    <p><strong>üéØ Compare Sorting Algorithms!</strong></p>
    <textarea id="algorithmCode2" placeholder="Compare different sorting algorithms...">import time
import random

def bubble_sort_optimized(arr):
    """Optimized bubble sort with early termination"""
    n = len(arr)
    comparisons = 0
    swaps = 0
    
    for i in range(n):
        swapped = False
        for j in range(0, n - i - 1):
            comparisons += 1
            if arr[j] > arr[j + 1]:
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
                swaps += 1
                swapped = True
        
        if not swapped:  # Array is sorted
            break
    
    return arr, comparisons, swaps

def selection_sort_detailed(arr):
    """Selection sort with detailed statistics"""
    n = len(arr)
    comparisons = 0
    swaps = 0
    
    for i in range(n):
        min_idx = i
        
        # Find minimum element in remaining array
        for j in range(i + 1, n):
            comparisons += 1
            if arr[j] < arr[min_idx]:
                min_idx = j
        
        # Swap if needed
        if min_idx != i:
            arr[i], arr[min_idx] = arr[min_idx], arr[i]
            swaps += 1
    
    return arr, comparisons, swaps

def insertion_sort(arr):
    """Insertion sort for comparison"""
    comparisons = 0
    swaps = 0
    
    for i in range(1, len(arr)):
        key = arr[i]
        j = i - 1
        
        while j >= 0:
            comparisons += 1
            if arr[j] > key:
                arr[j + 1] = arr[j]
                swaps += 1
                j -= 1
            else:
                break
        
        arr[j + 1] = key
    
    return arr, comparisons, swaps

def test_sorting_algorithm(sort_func, data, name):
    """Test a sorting algorithm and return performance metrics"""
    test_data = data.copy()
    start_time = time.time()
    
    result, comparisons, swaps = sort_func(test_data)
    
    end_time = time.time()
    execution_time = (end_time - start_time) * 1000  # Convert to milliseconds
    
    return {
        "name": name,
        "result": result,
        "comparisons": comparisons,
        "swaps": swaps,
        "time_ms": execution_time,
        "is_sorted": result == sorted(data)
    }

# Generate test datasets
print("üß™ SORTING ALGORITHM COMPARISON")
print("=" * 50)

# Test datasets
datasets = {
    "Small Random": [random.randint(1, 100) for _ in range(10)],
    "Already Sorted": list(range(1, 16)),
    "Reverse Sorted": list(range(15, 0, -1)),
    "Nearly Sorted": [1, 2, 3, 5, 4, 6, 7, 8, 10, 9, 11, 12, 13, 15, 14],
    "Many Duplicates": [5, 2, 8, 2, 9, 1, 5, 5, 2, 8, 1, 9]
}

algorithms = [
    (bubble_sort_optimized, "Bubble Sort"),
    (selection_sort_detailed, "Selection Sort"),
    (insertion_sort, "Insertion Sort")
]

# Test each dataset with each algorithm
for dataset_name, data in datasets.items():
    print(f"\nüìä Dataset: {dataset_name}")
    print(f"Original: {data}")
    print("-" * 40)
    
    results = []
    for sort_func, algo_name in algorithms:
        result = test_sorting_algorithm(sort_func, data, algo_name)
        results.append(result)
        
        print(f"{algo_name:15} | Comparisons: {result['comparisons']:3d} | "
              f"Swaps: {result['swaps']:3d} | Time: {result['time_ms']:.2f}ms")
    
    # Find the most efficient algorithm for this dataset
    best_comparisons = min(results, key=lambda x: x['comparisons'])
    best_swaps = min(results, key=lambda x: x['swaps'])
    
    print(f"\nüèÜ Best for comparisons: {best_comparisons['name']}")
    print(f"üèÜ Best for swaps: {best_swaps['name']}")

print("\nüìà ALGORITHM ANALYSIS SUMMARY")
print("=" * 40)
print("‚Ä¢ Bubble Sort: Simple but inefficient, good for learning")
print("‚Ä¢ Selection Sort: Fewer swaps, consistent O(n¬≤) performance")
print("‚Ä¢ Insertion Sort: Efficient for small/nearly sorted arrays")
print("\nüí° Key Insights:")
print("‚Ä¢ Algorithm choice depends on data characteristics")
print("‚Ä¢ 'Best' algorithm varies by use case and constraints")
print("‚Ä¢ Understanding trade-offs is crucial for optimization")

print("\nüéâ Sorting Algorithm Comparison Complete!")</textarea>
    <br>
    <button class="button" onclick="runAlgorithmCode(2)">‚ñ∂Ô∏è Run Code</button>
    
    <div id="algorithmOutput2" class="code-output hidden"></div>
  </div>

  <div id="algorithmLesson3" class="hidden">
    <h3>üèÜ Challenge: Dynamic Leaderboard System</h3>
    <p><strong>Mission:</strong> Build a comprehensive leaderboard system with multiple sorting criteria!</p>
    
    <div class="tip-box">
      <h3>üéØ Challenge Requirements</h3>
      <p>Create a complete leaderboard system that includes:</p>
      <ul style="text-align: left;">
        <li>Player management with multiple stats</li>
        <li>Multiple sorting criteria (score, time, level)</li>
        <li>Real-time leaderboard updates</li>
        <li>Performance analytics and statistics</li>
        <li>Custom sorting algorithms implementation</li>
      </ul>
    </div>

    <textarea id="algorithmCode3" placeholder="Build your Leaderboard System here...">class GameLeaderboard:
    def __init__(self):
        self.players = []
        self.sort_stats = {
            "comparisons": 0,
            "swaps": 0,
            "sorts_performed": 0
        }
    
    def add_player(self, name, score, level, time_played, achievements=0):
        """Add a new player to the leaderboard"""
        player = {
            "name": name,
            "score": score,
            "level": level,
            "time_played": time_played,  # in minutes
            "achievements": achievements,
            "efficiency": score / max(time_played, 1),  # score per minute
            "join_date": len(self.players) + 1  # Simple timestamp
        }
        self.players.append(player)
        return player
    
    def update_player_stats(self, name, score=None, level=None, time_played=None, achievements=None):
        """Update existing player statistics"""
        for player in self.players:
            if player["name"] == name:
                if score is not None:
                    player["score"] = score
                if level is not None:
                    player["level"] = level
                if time_played is not None:
                    player["time_played"] = time_played
                if achievements is not None:
                    player["achievements"] = achievements
                
                # Recalculate efficiency
                player["efficiency"] = player["score"] / max(player["time_played"], 1)
                return True
        return False
    
    def custom_bubble_sort(self, data, key_func, reverse=True):
        """Custom bubble sort with statistics tracking"""
        arr = data.copy()
        n = len(arr)
        comparisons = 0
        swaps = 0
        
        for i in range(n):
            swapped = False
            for j in range(0, n - i - 1):
                comparisons += 1
                
                val1 = key_func(arr[j])
                val2 = key_func(arr[j + 1])
                
                should_swap = (val1 < val2) if reverse else (val1 > val2)
                
                if should_swap:
                    arr[j], arr[j + 1] = arr[j + 1], arr[j]
                    swaps += 1
                    swapped = True
            
            if not swapped:
                break
        
        self.sort_stats["comparisons"] += comparisons
        self.sort_stats["swaps"] += swaps
        self.sort_stats["sorts_performed"] += 1
        
        return arr
    
    def custom_selection_sort(self, data, key_func, reverse=True):
        """Custom selection sort with statistics tracking"""
        arr = data.copy()
        n = len(arr)
        comparisons = 0
        swaps = 0
        
        for i in range(n):
            target_idx = i
            
            for j in range(i + 1, n):
                comparisons += 1
                
                val_target = key_func(arr[target_idx])
                val_current = key_func(arr[j])
                
                should_select = (val_current > val_target) if reverse else (val_current < val_target)
                
                if should_select:
                    target_idx = j
            
            if target_idx != i:
                arr[i], arr[target_idx] = arr[target_idx], arr[i]
                swaps += 1
        
        self.sort_stats["comparisons"] += comparisons
        self.sort_stats["swaps"] += swaps
        self.sort_stats["sorts_performed"] += 1
        
        return arr
    
    def get_leaderboard(self, sort_by="score", algorithm="bubble", top_n=None):
        """Get sorted leaderboard using specified criteria and algorithm"""
        if not self.players:
            return []
        
        # Define sorting key functions
        key_functions = {
            "score": lambda p: p["score"],
            "level": lambda p: p["level"],
            "efficiency": lambda p: p["efficiency"],
            "achievements": lambda p: p["achievements"],
            "time_played": lambda p: p["time_played"]
        }
        
        if sort_by not in key_functions:
            sort_by = "score"
        
        key_func = key_functions[sort_by]
        reverse = sort_by != "time_played"  # Lower time is better
        
        # Choose sorting algorithm
        if algorithm == "selection":
            sorted_players = self.custom_selection_sort(self.players, key_func, reverse)
        else:  # default to bubble
            sorted_players = self.custom_bubble_sort(self.players, key_func, reverse)
        
        # Return top N players if specified
        if top_n:
            return sorted_players[:top_n]
        
        return sorted_players
    
    def display_leaderboard(self, sort_by="score", algorithm="bubble", top_n=10):
        """Display formatted leaderboard"""
        leaderboard = self.get_leaderboard(sort_by, algorithm, top_n)
        
        print(f"üèÜ GAME LEADERBOARD - Top {min(top_n, len(leaderboard))}")
        print(f"üìä Sorted by: {sort_by.title()} | Algorithm: {algorithm.title()}")
        print("=" * 80)
        
        # Header
        print(f"{'Rank':<4} {'Name':<15} {'Score':<8} {'Level':<6} {'Time':<8} {'Achievements':<12} {'Efficiency':<10}")
        print("-" * 80)
        
        # Player data
        for i, player in enumerate(leaderboard, 1):
            rank_emoji = {1: "ü•á", 2: "ü•à", 3: "ü•â"}.get(i, f"{i:2d}")
            
            print(f"{rank_emoji:<4} {player['name']:<15} {player['score']:<8} "
                  f"{player['level']:<6} {player['time_played']:<8} "
                  f"{player['achievements']:<12} {player['efficiency']:<10.2f}")
        
        print("-" * 80)
        print(f"üìà Sort Statistics: {self.sort_stats['comparisons']} comparisons, "
              f"{self.sort_stats['swaps']} swaps")
    
    def get_player_analytics(self):
        """Generate comprehensive player analytics"""
        if not self.players:
            return {}
        
        scores = [p["score"] for p in self.players]
        levels = [p["level"] for p in self.players]
        times = [p["time_played"] for p in self.players]
        
        analytics = {
            "total_players": len(self.players),
            "average_score": sum(scores) / len(scores),
            "highest_score": max(scores),
            "lowest_score": min(scores),
            "average_level": sum(levels) / len(levels),
            "highest_level": max(levels),
            "total_playtime": sum(times),
            "average_playtime": sum(times) / len(times),
            "most_efficient": max(self.players, key=lambda p: p["efficiency"]),
            "most_achievements": max(self.players, key=lambda p: p["achievements"])
        }
        
        return analytics

# Create and demonstrate the leaderboard system
print("üéÆ DYNAMIC GAME LEADERBOARD SYSTEM")
print("=" * 50)

leaderboard = GameLeaderboard()

# Add sample players
players_data = [
    ("Alice", 15420, 25, 180, 12),
    ("Bob", 18750, 22, 240, 8),
    ("Charlie", 12300, 28, 150, 15),
    ("Diana", 21000, 30, 200, 18),
    ("Eve", 16800, 26, 190, 10),
    ("Frank", 19500, 24, 220, 14),
    ("Grace", 14200, 27, 160, 11),
    ("Henry", 22100, 29, 250, 20),
    ("Ivy", 17600, 23, 210, 9),
    ("Jack", 13900, 31, 170, 16)
]

print("üìù Adding players to leaderboard...")
for name, score, level, time, achievements in players_data:
    leaderboard.add_player(name, score, level, time, achievements)

print(f"‚úÖ Added {len(players_data)} players successfully!")
print()

# Display different leaderboard views
print("üèÜ LEADERBOARD BY SCORE (Bubble Sort)")
leaderboard.display_leaderboard("score", "bubble", 5)

print("\nüèÜ LEADERBOARD BY EFFICIENCY (Selection Sort)")
leaderboard.display_leaderboard("efficiency", "selection", 5)

print("\nüèÜ LEADERBOARD BY LEVEL (Bubble Sort)")
leaderboard.display_leaderboard("level", "bubble", 5)

# Player analytics
print("\nüìä PLAYER ANALYTICS")
print("=" * 30)
analytics = leaderboard.get_player_analytics()

print(f"Total Players: {analytics['total_players']}")
print(f"Average Score: {analytics['average_score']:.0f}")
print(f"Highest Score: {analytics['highest_score']} points")
print(f"Average Level: {analytics['average_level']:.1f}")
print(f"Total Playtime: {analytics['total_playtime']} minutes")
print(f"Most Efficient: {analytics['most_efficient']['name']} "
      f"({analytics['most_efficient']['efficiency']:.2f} pts/min)")
print(f"Most Achievements: {analytics['most_achievements']['name']} "
      f"({analytics['most_achievements']['achievements']} achievements)")

# Sorting performance summary
print(f"\n‚ö° SORTING PERFORMANCE")
print("=" * 25)
stats = leaderboard.sort_stats
print(f"Total Sorts: {stats['sorts_performed']}")
print(f"Total Comparisons: {stats['comparisons']}")
print(f"Total Swaps: {stats['swaps']}")
print(f"Avg Comparisons per Sort: {stats['comparisons'] / max(stats['sorts_performed'], 1):.1f}")

print("\nüéâ Dynamic Leaderboard System Complete!")
print("\nThis system demonstrates:")
print("‚Ä¢ Custom sorting algorithm implementations")
print("‚Ä¢ Multi-criteria sorting and ranking")
print("‚Ä¢ Performance monitoring and analytics")
print("‚Ä¢ Real-world game development applications")
print("‚Ä¢ Algorithm efficiency analysis")</textarea>
    <br>
    <button class="button" onclick="runAlgorithmCode(3)">üöÄ Run Leaderboard System</button>
    
    <div id="algorithmOutput3" class="code-output hidden"></div>
  </div>
</div>

<!-- Result Screen -->
<div id="endScreen" class="section hidden">
  <h2>üèÅ Outstanding Achievement! üéâ</h2>
  <p id="resultSummary"></p>
  <div class="navigation">
    <button class="button" onclick="goToMenu()">üè† Main Menu</button>
    <button class="button" onclick="celebrateCompletion()">üéâ Celebrate!</button>
  </div>
</div>

</div>

<div class="navigation">
  <a href="levels11-12.html" class="nav-btn">‚Üê Levels 11-12</a>
  <a href="index.html" class="nav-btn">üè† Main Menu</a>
</div>

<script>
// Game State
let currentSection = 'menu';
let currentDataLesson = 1;
let currentAlgorithmLesson = 1;
let gameProgress = {
  data: false,
  algorithms: false
};

// Sorting animation variables
let bubbleSortData = [64, 34, 25, 12, 22, 11, 90];
let selectionSortData = [64, 25, 12, 22, 11];

// Initialize game
window.onload = () => {
  createStars();
  updateDisplay();
  goToMenu();
  loadProgress();
};

function createStars() {
  const starsContainer = document.getElementById('stars');
  for (let i = 0; i < 100; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.left = Math.random() * 100 + '%';
    star.style.top = Math.random() * 100 + '%';
    star.style.width = star.style.height = Math.random() * 3 + 1 + 'px';
    star.style.animationDelay = Math.random() * 2 + 's';
    starsContainer.appendChild(star);
  }
}

function updateDisplay() {
  const totalXP = parseInt(localStorage.getItem("totalXP") || "0");
  document.getElementById("totalXP").textContent = totalXP;
  
  // Calculate progress
  const completedLevels = Object.values(gameProgress).filter(Boolean).length;
  const progress = (completedLevels / 2) * 100;
  
  document.getElementById("progressFill").style.width = progress + '%';
  document.getElementById("progressText").textContent = Math.round(progress) + '%';
  
  updateLevelCards();
}

function updateLevelCards() {
  const cards = ['dataCard', 'algorithmsCard'];
  const levels = ['data', 'algorithms'];
  
  cards.forEach((cardId, index) => {
    const card = document.getElementById(cardId);
    const level = levels[index];
    
    card.classList.remove('completed', 'active');
    
    if (gameProgress[level]) {
      card.classList.add('completed');
    } else if (currentSection === level) {
      card.classList.add('active');
    }
  });
}

function goToMenu() {
  hideAllSections();
  currentSection = 'menu';
  updateDisplay();
}

function goToLevel(level) {
  currentSection = level;
  hideAllSections();
  
  if (level === 'data') {
    document.getElementById('dataLevel').classList.remove('hidden');
    showDataLesson(1);
  } else if (level === 'algorithms') {
    document.getElementById('algorithmsLevel').classList.remove('hidden');
    showAlgorithmLesson(1);
  }
  
  updateDisplay();
}

function hideAllSections() {
  document.querySelectorAll(".section").forEach(el => el.classList.add("hidden"));
}

function showDataLesson(lessonNum) {
  // Hide all data lessons
  for (let i = 1; i <= 3; i++) {
    document.getElementById(`dataLesson${i}`).classList.add('hidden');
  }
  
  // Update tab styles
  const dataTabs = document.querySelector('#dataLevel .lesson-tabs').children;
  Array.from(dataTabs).forEach(tab => tab.classList.remove('active'));
  dataTabs[lessonNum - 1].classList.add('active');
  
  // Show selected lesson
  document.getElementById(`dataLesson${lessonNum}`).classList.remove('hidden');
  currentDataLesson = lessonNum;
}

function showAlgorithmLesson(lessonNum) {
  // Hide all algorithm lessons
  for (let i = 1; i <= 3; i++) {
    document.getElementById(`algorithmLesson${i}`).classList.add('hidden');
  }
  
  // Update tab styles
  const algorithmTabs = document.querySelector('#algorithmsLevel .lesson-tabs').children;
  Array.from(algorithmTabs).forEach(tab => tab.classList.remove('active'));
  algorithmTabs[lessonNum - 1].classList.add('active');
  
  // Show selected lesson
  document.getElementById(`algorithmLesson${lessonNum}`).classList.remove('hidden');
  currentAlgorithmLesson = lessonNum;
}

function runDataCode(lessonNum) {
  const code = document.getElementById(`dataCode${lessonNum}`).value;
  const output = document.getElementById(`dataOutput${lessonNum}`);
  
  output.classList.remove('hidden');
  
  try {
    let result = 'Code executed successfully! In a real Python environment, this would show:\n\n';
    
    if (code.includes('list') || code.includes('[')) {
      result += '‚Ä¢ List operations and manipulations\n';
      result += '‚Ä¢ Data organization and statistics\n';
      result += '‚Ä¢ Dynamic array management\n';
    }
    
    if (code.includes('dict') || code.includes('{')) {
      result += '‚Ä¢ Dictionary operations and lookups\n';
      result += '‚Ä¢ Key-value pair management\n';
      result += '‚Ä¢ Complex data structure handling\n';
    }
    
    if (lessonNum === 3 && code.includes('class') && code.includes('def')) {
      result += '\nüéâ Amazing RPG Inventory System! Your program demonstrates:\n';
      result += '‚úÖ Advanced data structure mastery\n';
      result += '‚úÖ Object-oriented programming\n';
      result += '‚úÖ Complex data management\n';
      result += '‚úÖ Real-world application development\n';
      result += '‚úÖ Professional software architecture\n';
      
      gameProgress.data = true;
      const xp = parseInt(localStorage.getItem("totalXP") || "0") + 600;
      localStorage.setItem("totalXP", xp);
      saveProgress();
      updateDisplay();
    }
    
    output.innerHTML = '<strong>üñ•Ô∏è Output:</strong><br>' + result;
    
  } catch (error) {
    output.innerHTML = `<strong>‚ùå Error:</strong><br>${error.message}`;
  }
}

function runAlgorithmCode(lessonNum) {
  const code = document.getElementById(`algorithmCode${lessonNum}`).value;
  const output = document.getElementById(`algorithmOutput${lessonNum}`);
  
  output.classList.remove('hidden');
  
  try {
    let result = 'Code executed successfully! In a real Python environment, this would show:\n\n';
    
    if (code.includes('def') && code.includes('sort')) {
      result += '‚Ä¢ Sorting algorithm implementations\n';
      result += '‚Ä¢ Performance analysis and comparisons\n';
      result += '‚Ä¢ Algorithm efficiency measurements\n';
    }
    
    if (lessonNum === 3 && code.includes('class') && code.includes('leaderboard')) {
      result += '\nüéâ Outstanding Leaderboard System! Your program demonstrates:\n';
      result += '‚úÖ Custom sorting algorithm implementations\n';
      result += '‚úÖ Multi-criteria ranking systems\n';
      result += '‚úÖ Performance monitoring and analytics\n';
      result += '‚úÖ Real-world game development\n';
      result += '‚úÖ Algorithm optimization techniques\n';
      
      gameProgress.algorithms = true;
      const xp = parseInt(localStorage.getItem("totalXP") || "0") + 800;
      localStorage.setItem("totalXP", xp);
      saveProgress();
      updateDisplay();
      
      // Check if both levels are complete
      if (gameProgress.data && gameProgress.algorithms) {
        setTimeout(() => {
          showCompletionScreen();
        }, 2000);
      }
    }
    
    output.innerHTML = '<strong>üñ•Ô∏è Output:</strong><br>' + result;
    
  } catch (error) {
    output.innerHTML = `<strong>‚ùå Error:</strong><br>${error.message}`;
  }
}

// Sorting Animation Functions
function animateBubbleSort() {
  const visual = document.getElementById('bubbleSortVisual');
  const bars = visual.children;
  let data = [...bubbleSortData];
  let i = 0, j = 0;
  
  function step() {
    // Reset all bars
    Array.from(bars).forEach(bar => {
      bar.classList.remove('comparing', 'sorted');
    });
    
    if (i < data.length) {
      if (j < data.length - i - 1) {
        // Highlight comparing bars
        bars[j].classList.add('comparing');
        bars[j + 1].classList.add('comparing');
        
        // Check if swap needed
        if (data[j] > data[j + 1]) {
          // Swap data
          [data[j], data[j + 1]] = [data[j + 1], data[j]];
          
          // Update visual
          setTimeout(() => {
            bars[j].style.height = data[j] + 'px';
            bars[j].textContent = data[j];
            bars[j + 1].style.height = data[j + 1] + 'px';
            bars[j + 1].textContent = data[j + 1];
          }, 250);
        }
        
        j++;
        setTimeout(step, 500);
      } else {
        // Mark last element as sorted
        bars[data.length - i - 1].classList.add('sorted');
        i++;
        j = 0;
        setTimeout(step, 500);
      }
    } else {
      // All sorted
      Array.from(bars).forEach(bar => bar.classList.add('sorted'));
    }
  }
  
  step();
}

function resetBubbleSort() {
  const visual = document.getElementById('bubbleSortVisual');
  const bars = visual.children;
  
  bubbleSortData.forEach((value, index) => {
    bars[index].style.height = value + 'px';
    bars[index].textContent = value;
    bars[index].classList.remove('comparing', 'sorted');
  });
}

function animateSelectionSort() {
  const visual = document.getElementById('selectionSortVisual');
  const bars = visual.children;
  let data = [...selectionSortData];
  let i = 0;
  
  function step() {
    // Reset all bars
    Array.from(bars).forEach(bar => {
      bar.classList.remove('comparing', 'sorted');
    });
    
    if (i < data.length) {
      let minIdx = i;
      let j = i + 1;
      
      function findMin() {
        if (j < data.length) {
          bars[j].classList.add('comparing');
          bars[minIdx].classList.add('comparing');
          
          if (data[j] < data[minIdx]) {
            minIdx = j;
          }
          
          j++;
          setTimeout(findMin, 300);
        } else {
          // Swap if needed
          if (minIdx !== i) {
            [data[i], data[minIdx]] = [data[minIdx], data[i]];
            
            // Update visual
            bars[i].style.height = data[i] + 'px';
            bars[i].textContent = data[i];
            bars[minIdx].style.height = data[minIdx] + 'px';
            bars[minIdx].textContent = data[minIdx];
          }
          
          // Mark as sorted
          bars[i].classList.add('sorted');
          i++;
          setTimeout(step, 500);
        }
      }
      
      findMin();
    } else {
      // All sorted
      Array.from(bars).forEach(bar => bar.classList.add('sorted'));
    }
  }
  
  step();
}

function resetSelectionSort() {
  const visual = document.getElementById('selectionSortVisual');
  const bars = visual.children;
  
  selectionSortData.forEach((value, index) => {
    bars[index].style.height = value + 'px';
    bars[index].textContent = value;
    bars[index].classList.remove('comparing', 'sorted');
  });
}

function showCompletionScreen() {
  document.getElementById('resultSummary').innerHTML = `
    <div style="text-align: center; font-size: 18px;">
      <h3>üèÜ ADVANCED PROGRAMMING MASTERY! üèÜ</h3>
      <p>üéâ Congratulations! You've mastered advanced data structures and algorithms!</p>
      <p><strong>üéì Advanced Skills Achieved:</strong></p>
      <ul style="text-align: left; max-width: 600px; margin: 0 auto;">
        <li>‚úÖ Advanced data structure manipulation</li>
        <li>‚úÖ Lists, dictionaries, sets, and tuples mastery</li>
        <li>‚úÖ Algorithm design and implementation</li>
        <li>‚úÖ Sorting algorithm analysis and optimization</li>
        <li>‚úÖ Performance monitoring and analytics</li>
        <li>‚úÖ Complex system architecture</li>
        <li>‚úÖ Real-world application development</li>
        <li>‚úÖ Professional programming practices</li>
      </ul>
      <p><strong>üåü Total XP Earned:</strong> ${localStorage.getItem("totalXP") || "0"}</p>
      <p>üöÄ You're now ready for expert-level programming challenges!</p>
    </div>
  `;
  
  hideAllSections();
  document.getElementById('endScreen').classList.remove('hidden');
}

function celebrateCompletion() {
  alert('üéâ Amazing work! You have mastered advanced data structures and algorithms! You are now an expert programmer! üéâ');
}

function loadProgress() {
  const saved = localStorage.getItem('gameProgress');
  if (saved) {
    const savedProgress = JSON.parse(saved);
    gameProgress.data = savedProgress.data || false;
    gameProgress.algorithms = savedProgress.algorithms || false;
  }
}

function saveProgress() {
  localStorage.setItem('gameProgress', JSON.stringify(gameProgress));
}

// Initialize
updateDisplay();
</script>
</body>
</html>